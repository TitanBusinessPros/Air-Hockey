<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Hockey</title>
    <link rel="icon" type="image/png" href="https://github.com/TitanBusinessPros/Air-Hockey/raw/main/Air%20Hockey%20Favicon-Logo.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e27;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
        }

        .container {
            text-align: center;
            padding: 20px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #00d4ff;
            text-shadow: 0 0 20px #00d4ff;
        }

        .menu {
            background: rgba(0, 212, 255, 0.1);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid #00d4ff;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        .menu h2 {
            margin-bottom: 30px;
            font-size: 1.8em;
        }

        .game-logo {
            width: 200px;
            height: auto;
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(0, 212, 255, 0.5));
        }

        .menu button {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.4em;
            border-radius: 12px;
            cursor: pointer;
            margin: 20px;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.4);
        }

        .menu button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 212, 255, 0.6);
        }

        #gameCanvas {
            border: 3px solid #00d4ff;
            border-radius: 15px;
            box-shadow: 0 0 40px rgba(0, 212, 255, 0.5);
            display: none;
            background: #1a1f3a;
        }

        .scoreboard {
            display: none;
            justify-content: space-around;
            margin: 20px 0;
            font-size: 2em;
            font-weight: bold;
        }

        .score-item {
            background: rgba(0, 212, 255, 0.1);
            padding: 15px 40px;
            border-radius: 12px;
            border: 2px solid #00d4ff;
        }

        .controls {
            margin-top: 20px;
            display: none;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1em;
            border-radius: 10px;
            cursor: pointer;
            margin: 5px;
            font-weight: bold;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .instructions {
            margin-top: 15px;
            font-size: 1.1em;
            color: #00d4ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>⚡ AIR HOCKEY ⚡</h1>
        
        <div class="menu" id="menu">
            <img src="https://github.com/TitanBusinessPros/Air-Hockey/raw/main/Air%20Hockey-Logo2.png" alt="Air Hockey Logo" class="game-logo">
            <h2>Ready to Play?</h2>
            <button onclick="startGame()">START GAME</button>
        </div>

        <div class="scoreboard" id="scoreboard">
            <div class="score-item">
                <div style="font-size: 0.6em; color: #00d4ff;">YOU</div>
                <div id="score1">0</div>
            </div>
            <div class="score-item">
                <div style="font-size: 0.6em; color: #00d4ff;">FIRST TO 7</div>
            </div>
            <div class="score-item">
                <div style="font-size: 0.6em; color: #00d4ff;">AI</div>
                <div id="score2">0</div>
            </div>
        </div>

        <canvas id="gameCanvas" width="800" height="600"></canvas>

        <div class="controls" id="controls">
            <div class="instructions">
                Move your mouse to control your paddle
            </div>
            <button class="btn" onclick="backToMenu()">Back to Menu</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        const WIDTH = 800;
        const HEIGHT = 600;
        const GOAL_WIDTH = 200;
        const GOAL_X = (WIDTH - GOAL_WIDTH) / 2;
        
        let gameRunning = false;
        let playerScore = 0;
        let aiScore = 0;
        let waitingForReset = false;
        let frameCount = 0;
        
        // Background music
        const bgMusic = new Audio('https://github.com/TitanBusinessPros/Air-Hockey/raw/main/Air%20Hockey%20Song.mp3');
        bgMusic.loop = true;
        bgMusic.volume = 0.3;
        
        const puck = {
            x: WIDTH / 2,
            y: HEIGHT / 2,
            vx: 0,
            vy: 0,
            radius: 15,
            mass: 1
        };
        
        const player = {
            x: WIDTH / 2,
            y: HEIGHT - 80,
            vx: 0,
            vy: 0,
            radius: 35
        };
        
        const ai = {
            x: WIDTH / 2,
            y: 80,
            vx: 0,
            vy: 0,
            radius: 35,
            reactDelay: 0
        };
        
        function startGame() {
            // Start background music
            bgMusic.play().catch(e => console.log('Audio play failed:', e));
            
            document.getElementById('menu').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('scoreboard').style.display = 'flex';
            document.getElementById('controls').style.display = 'block';
            
            playerScore = 0;
            aiScore = 0;
            frameCount = 0;
            updateScoreDisplay();
            servePuck();
            gameRunning = true;
            requestAnimationFrame(gameLoop);
        }
        
        function servePuck() {
            waitingForReset = false;
            puck.x = WIDTH / 2;
            puck.y = HEIGHT / 2;
            
            const angle = (Math.random() - 0.5) * Math.PI / 2.5;
            const speed = 7 + Math.random() * 2;
            const direction = Math.random() < 0.5 ? 1 : -1;
            
            puck.vx = Math.sin(angle) * speed;
            puck.vy = Math.cos(angle) * speed * direction;
        }
        
        function updateScoreDisplay() {
            document.getElementById('score1').textContent = playerScore;
            document.getElementById('score2').textContent = aiScore;
        }
        
        function updatePuck() {
            if (waitingForReset) return;
            
            frameCount++;
            
            // Apply velocity
            puck.x += puck.vx;
            puck.y += puck.vy;
            
            // Slight friction
            puck.vx *= 0.997;
            puck.vy *= 0.997;
            
            // Keep speed above minimum
            const speed = Math.sqrt(puck.vx * puck.vx + puck.vy * puck.vy);
            if (speed > 0.1 && speed < 5) {
                const mult = 5 / speed;
                puck.vx *= mult;
                puck.vy *= mult;
            }
            
            // Side wall bounces
            if (puck.x - puck.radius < 0) {
                puck.x = puck.radius;
                puck.vx = Math.abs(puck.vx) * 0.9;
            }
            if (puck.x + puck.radius > WIDTH) {
                puck.x = WIDTH - puck.radius;
                puck.vx = -Math.abs(puck.vx) * 0.9;
            }
            
            // Top goal or wall
            if (puck.y - puck.radius < 0) {
                if (puck.x > GOAL_X && puck.x < GOAL_X + GOAL_WIDTH) {
                    handleGoal('player');
                } else {
                    puck.y = puck.radius;
                    puck.vy = Math.abs(puck.vy) * 0.9;
                }
            }
            
            // Bottom goal or wall
            if (puck.y + puck.radius > HEIGHT) {
                if (puck.x > GOAL_X && puck.x < GOAL_X + GOAL_WIDTH) {
                    handleGoal('ai');
                } else {
                    puck.y = HEIGHT - puck.radius;
                    puck.vy = -Math.abs(puck.vy) * 0.9;
                }
            }
            
            // Paddle collisions
            handlePaddleCollision(player);
            handlePaddleCollision(ai);
        }
        
        function handlePaddleCollision(paddle) {
            const dx = puck.x - paddle.x;
            const dy = puck.y - paddle.y;
            const dist = Math.sqrt(dx * dx + dy * dy);
            const minDist = puck.radius + paddle.radius;
            
            if (dist < minDist) {
                // Normalize collision vector
                const nx = dx / dist;
                const ny = dy / dist;
                
                // Separate objects
                const overlap = minDist - dist;
                puck.x += nx * overlap;
                puck.y += ny * overlap;
                
                // Relative velocity
                const rvx = puck.vx - paddle.vx;
                const rvy = puck.vy - paddle.vy;
                
                // Velocity along collision normal
                const velAlongNormal = rvx * nx + rvy * ny;
                
                // Don't resolve if objects moving apart
                if (velAlongNormal > 0) return;
                
                // Restitution (bounciness)
                const restitution = 1.15;
                
                // Calculate impulse
                const j = -(1 + restitution) * velAlongNormal;
                
                // Apply impulse
                puck.vx += j * nx;
                puck.vy += j * ny;
                
                // Add paddle velocity for realistic hits
                puck.vx += paddle.vx * 0.3;
                puck.vy += paddle.vy * 0.3;
                
                // Cap max speed
                const speed = Math.sqrt(puck.vx * puck.vx + puck.vy * puck.vy);
                const maxSpeed = 18;
                if (speed > maxSpeed) {
                    puck.vx = (puck.vx / speed) * maxSpeed;
                    puck.vy = (puck.vy / speed) * maxSpeed;
                }
            }
        }
        
        function handleGoal(scorer) {
            waitingForReset = true;
            puck.vx = 0;
            puck.vy = 0;
            
            if (scorer === 'player') {
                playerScore++;
            } else {
                aiScore++;
            }
            
            updateScoreDisplay();
            
            if (playerScore >= 7 || aiScore >= 7) {
                setTimeout(endGame, 1500);
            } else {
                setTimeout(servePuck, 1500);
            }
        }
        
        function updateAI() {
            // Calculate where puck will be
            const lookahead = 15;
            const predictX = puck.x + puck.vx * lookahead;
            const predictY = puck.y + puck.vy * lookahead;
            
            let targetX, targetY;
            
            // If puck coming toward AI
            if (puck.vy < 0 && puck.y < HEIGHT / 2) {
                // Intercept
                targetX = Math.max(80, Math.min(WIDTH - 80, predictX));
                targetY = Math.max(60, Math.min(240, predictY - 40));
            } else {
                // Return to center
                targetX = WIDTH / 2;
                targetY = 100;
            }
            
            // Smooth AI movement
            const aiSpeed = 0.15;
            const dx = targetX - ai.x;
            const dy = targetY - ai.y;
            
            ai.vx = dx * aiSpeed;
            ai.vy = dy * aiSpeed;
            
            ai.x += ai.vx;
            ai.y += ai.vy;
            
            // Keep in bounds
            ai.x = Math.max(ai.radius + 10, Math.min(WIDTH - ai.radius - 10, ai.x));
            ai.y = Math.max(ai.radius + 10, Math.min(HEIGHT / 2 - ai.radius - 10, ai.y));
        }
        
        function draw() {
            // Clear
            ctx.fillStyle = '#1a1f3a';
            ctx.fillRect(0, 0, WIDTH, HEIGHT);
            
            // Center line
            ctx.strokeStyle = '#00d4ff';
            ctx.lineWidth = 3;
            ctx.setLineDash([15, 15]);
            ctx.beginPath();
            ctx.moveTo(0, HEIGHT / 2);
            ctx.lineTo(WIDTH, HEIGHT / 2);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Center circle
            ctx.beginPath();
            ctx.arc(WIDTH / 2, HEIGHT / 2, 60, 0, Math.PI * 2);
            ctx.stroke();
            
            // Goals
            ctx.fillStyle = 'rgba(255, 50, 50, 0.2)';
            ctx.fillRect(GOAL_X, 0, GOAL_WIDTH, 8);
            ctx.strokeStyle = '#ff3366';
            ctx.lineWidth = 4;
            ctx.strokeRect(GOAL_X, 0, GOAL_WIDTH, 8);
            
            ctx.fillStyle = 'rgba(0, 212, 255, 0.2)';
            ctx.fillRect(GOAL_X, HEIGHT - 8, GOAL_WIDTH, 8);
            ctx.strokeStyle = '#00d4ff';
            ctx.strokeRect(GOAL_X, HEIGHT - 8, GOAL_WIDTH, 8);
            
            // Puck
            ctx.fillStyle = '#ffffff';
            ctx.shadowBlur = 20;
            ctx.shadowColor = '#ffffff';
            ctx.beginPath();
            ctx.arc(puck.x, puck.y, puck.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            // Player paddle
            ctx.fillStyle = '#00d4ff';
            ctx.beginPath();
            ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // AI paddle
            ctx.fillStyle = '#ff3366';
            ctx.beginPath();
            ctx.arc(ai.x, ai.y, ai.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();
        }
        
        function gameLoop() {
            if (!gameRunning) return;
            
            updatePuck();
            updateAI();
            draw();
            
            requestAnimationFrame(gameLoop);
        }
        
        function endGame() {
            gameRunning = false;
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.85)';
            ctx.fillRect(0, 0, WIDTH, HEIGHT);
            
            const winner = playerScore >= 7 ? 'YOU WIN!' : 'AI WINS!';
            ctx.fillStyle = playerScore >= 7 ? '#00d4ff' : '#ff3366';
            ctx.font = 'bold 60px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(winner, WIDTH / 2, HEIGHT / 2 - 20);
            
            ctx.fillStyle = 'white';
            ctx.font = 'bold 40px Arial';
            ctx.fillText(`${playerScore} - ${aiScore}`, WIDTH / 2, HEIGHT / 2 + 40);
            
            ctx.font = '24px Arial';
            ctx.fillText('Click "Back to Menu" to play again', WIDTH / 2, HEIGHT / 2 + 90);
        }
        
        function backToMenu() {
            gameRunning = false;
            waitingForReset = false;
            bgMusic.pause();
            bgMusic.currentTime = 0;
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('scoreboard').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('menu').style.display = 'block';
        }
        
        // Mouse control
        let lastMouseX = WIDTH / 2;
        let lastMouseY = HEIGHT - 80;
        
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const newX = e.clientX - rect.left;
            const newY = e.clientY - rect.top;
            
            // Calculate velocity for momentum transfer
            player.vx = (newX - lastMouseX) * 0.5;
            player.vy = (newY - lastMouseY) * 0.5;
            
            player.x = Math.max(player.radius + 10, Math.min(WIDTH - player.radius - 10, newX));
            player.y = Math.max(HEIGHT / 2 + player.radius + 10, Math.min(HEIGHT - player.radius - 10, newY));
            
            lastMouseX = newX;
            lastMouseY = newY;
        });
    </script>
</body>
</html>